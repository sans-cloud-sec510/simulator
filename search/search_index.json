{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"SANS SEC510 Cloud Security Flight Simulator Instructions","text":"<p>These setup instructions contain everything you'll need to deploy the SEC510 lab environment into your own personal AWS, Azure, and Google cloud accounts. Make sure you use the instructions for the version of the course that you attended.</p> <ul> <li>SEC510 J01</li> <li>SEC510 J02</li> </ul>"},{"location":"j01/","title":"SANS SEC510 Cloud Security Simulator Setup Guide (J01)","text":"<p>SEC510 students can follow these instructions to build the labs in their personal AWS, Azure, and Google cloud accounts. Doing so allows students to complete the labs after access to the SANS provisioned accounts is expired. Cost estimates vary by cloud provider:</p> <ul> <li> <p>AWS free tier eligible accounts are expected to cost roughly $10 USD per day for the AWS resources (including the cloud simulator instance). Make sure you stop the cloud simulator instance when you are not using it.</p> </li> <li> <p>Azure Pay as You Go (PAYG) subscriptions are expected to cost roughly $5 USD per day for the Azure resources.</p> </li> <li> <p>Google Cloud projects are expected to cost roughly $5 USD per day for the Google Cloud resources.</p> </li> </ul> <p>To limit costs, please make sure to run the Lab 5.4: Lab Teardown script in the electronic workbook when you are not using the lab environment.</p> <p>YOUR Financial Responsibility</p> <p>When running the Cloud Security Flight Simulator and performing the corresponding labs in your personal AWS, Azure, and Google Cloud environments, YOU are responsible for all costs.</p> <p>BEWARE OF SECURITY RISKS</p> <p>We will be deploying purposefully vulnerable applications and infrastructure to these accounts. This is necessary to illustrate the dangers of insecure cloud environments and how to mitigate the risk they introduce.</p> <p>While we take precautions to keep students safe, SANS cannot guarantee that these accounts will be protected.</p> <p>We recommend monitoring your accounts for unexpected activity. You should also consider canceling your billing when you are done with your lab environment. Here are instructions on how to do this:</p> <ul> <li>Close your AWS account</li> <li>Cancel your Azure subscription</li> <li>Shutting down GCP projects</li> </ul>"},{"location":"j01/#cloud-simulator-deployment","title":"Cloud Simulator Deployment","text":""},{"location":"j01/#requirements","title":"Requirements","text":"<ul> <li>Details found in Course Materials Downloads \"Lab Setup Instructions\" guide:<ul> <li>Firefox + SmartProxy (by Salar K)</li> <li>SANS Cloud Security CA Certificate</li> </ul> </li> <li>Provided by you:<ul> <li>AWS personal account with administrator credentials</li> <li>Terraform 1.4 or later</li> <li>AWS CLI</li> </ul> </li> <li>Provided by the SEC510 instructor or OnDemand SME:<ul> <li>Cloud flight simulator AMI shared to your personal AWS account</li> <li>Commands to set the Terraform variables and apply the template</li> </ul> </li> </ul>"},{"location":"j01/#step-by-step-instructions","title":"Step by Step Instructions","text":"<ol> <li> <p>Configure your AWS CLI with administrator credentials for your AWS Account.</p> <pre><code>aws configure\n</code></pre> </li> <li> <p>Create a new working directory for running the Terraform deployment.</p> <pre><code>mkdir ~/sec510\ncd ~/sec510\n</code></pre> </li> <li> <p>Download the sec510-j01.tf launch template (e.g. sec510-j01.tf) into the <code>~/sec510</code> directory.</p> </li> <li> <p>After sharing the AMI with your personal AWS account, the instructor or OnDemand SME will give you the commands to set the required Terraform variables and apply the template. Run those commands in the <code>~/sec510</code> directory.</p> </li> <li> <p>The <code>terraform apply</code> command will take a few minutes to complete. Once it is finished, you will see the following:</p> <ul> <li> <p>The <code>environment_summary</code> output contains the information you need to connect to the Cloud Security Flight Simulator.</p> </li> <li> <p>SmartProxy Config - The name of the SmartProxy configuration file created by Terraform in the <code>~/sec510</code> directory.</p> </li> <li> <p>SSH + SOCKS Connect Command - The command to connect to the Cloud Security Flight Simulator using SSH and the SOCKS proxy using the private key created by Terraform in the <code>~/sec510</code> directory.</p> </li> </ul> <pre><code>Apply complete! Resources: 16 added, 0 changed, 0 destroyed.\n\nOutputs:\n\nenvironment_summary = &lt;&lt;END_SUMMARY\nLatest AMI:  ami-01234567890123456 - sans-sec510-j01.24.1.123\nRunning AMI: ami-01234567890123456\nPublic IP:   18.227.81.85\n\nLocal IP:          11.222.333.444\nAllow CIDR:        11.222.333.444/32\n\nProxy Pass:        informally_typically_humble_squid\nSmartProxy Config: SmartProxy-frank-man.json\n\nSSH + SOCKS Connect Command\n\n    ssh -i frank-man.pem -D 54561 student@18.227.81.85\n\nEND_SUMMARY\n</code></pre> </li> <li> <p>Follow the course Lab Setup Instructions guide to install the Cloud Security Flight Simulator's CA certificate, configure the SmartProxy extension, and connect to the Cloud Security Flight Simulator.</p> </li> </ol>"},{"location":"j01/#aws-cloud-security-iam-user","title":"AWS Cloud Security IAM User","text":"<p>To deploy the lab infrastructure to AWS, you need to create a new <code>cloudsecurity</code> IAM user. The easiest way to set permissions is by attaching the AdministratorAccess policy. Our recommendation is to use a permission boundary on this IAM user to restrict access to the services not used in the AWS labs. Then, create a new pair of access keys for authenticating the Cloud Security Flight Simulator to your account.</p>"},{"location":"j01/#requirements_1","title":"Requirements","text":"<ul> <li>Provided by you:<ul> <li>AWS personal account with administrator credentials</li> </ul> </li> </ul>"},{"location":"j01/#step-by-step-instructions_1","title":"Step by Step Instructions","text":"<ol> <li> <p>Log into the AWS Console using your personal administrator account.</p> </li> <li> <p>See the Creating an IAM user in your AWS account documentation to create a new <code>cloudsecurity</code> user.</p> </li> <li> <p>See the Adding permissions to a user (console) documentation to attach the <code>AdministratorAccess</code> policy.</p> </li> <li> <p>See the Managing access keys for IAM users documentation to create a new pair of access keys for the <code>cloudsecurity</code> user.</p> </li> <li> <p>Follow the Lab 1.0: Cloud Account Setup instructions in the electronic workbook to configure the Cloud Security Flight Simulator's AWS Command Line Interface (CLI).</p> </li> </ol>"},{"location":"j01/#azure-subscription","title":"Azure Subscription","text":"<p>To deploy the lab infrastructure to Azure, you need to create a new Azure Subscription (Pay as you Go) and authenticate the Cloud Security Flight Simulator to your Azure subscription.</p>"},{"location":"j01/#requirements_2","title":"Requirements","text":"<ul> <li>Provided by you:<ul> <li>Azure Pay as You Go (PAYG) subscription with owner permissions</li> </ul> </li> </ul>"},{"location":"j01/#step-by-step-instructions_2","title":"Step by Step Instructions","text":"<ol> <li> <p>Log into the Azure Portal using your personal administrator account.</p> </li> <li> <p>Follow the Lab 1.0: Cloud Account Setup instructions in the electronic workbook to configure the Cloud Security Flight Simulator's Command Line Interface (CLI) to authenticate to your Azure subscription.</p> </li> </ol>"},{"location":"j01/#google-cloud-project","title":"Google Cloud Project","text":"<p>To deploy the lab infrastructure to Google, you will need the personal Google Cloud project you used while taking the course. All you need to do is export a new service account key file and copy that to the Cloud Security Flight Simulator instance.</p>"},{"location":"j01/#requirements_3","title":"Requirements","text":"<ul> <li>Provided by you:<ul> <li>Personal Google Cloud project</li> </ul> </li> </ul>"},{"location":"j01/#step-by-step-instructions_3","title":"Step by Step Instructions","text":"<ol> <li> <p>Log into the Google Cloud Portal using your personal email address.</p> </li> <li> <p>Follow the Lab 1.0: Cloud Account Setup instructions in the electronic workbook to configure the Google Cloud Command Line Interface (CLI) and set up your Firebase project.</p> </li> </ol>"},{"location":"j01/#clean-up","title":"Clean Up","text":"<ul> <li> <p>When you are finished with the labs, run the Lab 5.4: Lab Teardown script in the electronic workbook to remove the lab infrastructure from your AWS, Azure and Google cloud accounts.</p> </li> <li> <p>Then use the same Terraform commands you used to create the Cloud Security Flight Simulator, except change the last command from <code>terraform apply</code> to <code>terraform destroy</code>. This will remove the Cloud Security Flight Simulator and the SmartProxy configuration file from your AWS account.</p> </li> </ul>"},{"location":"j02/","title":"SANS SEC510 Cloud Security Simulator Setup Guide (J02)","text":"<p>SEC510 students can follow these instructions to build the labs in their personal AWS, Azure, and Google cloud accounts. Doing so allows students to complete the labs after access to the SANS provisioned accounts is expired. Cost estimates vary by cloud provider:</p> <ul> <li> <p>AWS free tier eligible accounts are expected to cost roughly $10 USD per day for the AWS resources (including the cloud simulator instance). Make sure you stop the cloud simulator instance when you are not using it.</p> </li> <li> <p>Azure Pay as You Go (PAYG) subscriptions are expected to cost roughly $5 USD per day for the Azure resources.</p> </li> <li> <p>Google Cloud projects are expected to cost roughly $5 USD per day for the Google Cloud resources.</p> </li> </ul> <p>To limit costs, please make sure to run the Lab 5.4: Lab Teardown script in the electronic workbook when you are not using the lab environment.</p> <p>YOUR Financial Responsibility</p> <p>When running the Cloud Security Flight Simulator and performing the corresponding labs in your personal AWS, Azure, and Google Cloud environments, YOU are responsible for all costs.</p> <p>BEWARE OF SECURITY RISKS</p> <p>We will be deploying purposefully vulnerable applications and infrastructure to these accounts. This is necessary to illustrate the dangers of insecure cloud environments and how to mitigate the risk they introduce.</p> <p>While we take precautions to keep students safe, SANS cannot guarantee that these accounts will be protected.</p> <p>We recommend monitoring your accounts for unexpected activity. You should also consider canceling your billing when you are done with your lab environment. Here are instructions on how to do this:</p> <ul> <li>Close your AWS account</li> <li>Cancel your Azure subscription</li> <li>Shutting down GCP projects</li> </ul> <p>Instructions May Be Out-of-Date</p> <p>We do not maintain these instructions as actively as those in the E-Workbook. Please note that these instructions may be out-of-date. Thank you for understanding.</p>"},{"location":"j02/#cloud-simulator-deployment","title":"Cloud Simulator Deployment","text":""},{"location":"j02/#requirements","title":"Requirements","text":"<ul> <li>Details found in Course Materials Downloads \"Lab Setup Instructions\" guide:<ul> <li>Firefox + SmartProxy (by Salar K)</li> <li>SANS Cloud Security CA Certificate</li> </ul> </li> <li>Provided by you:<ul> <li>AWS personal account with administrator credentials</li> <li>Terraform 1.4 or later</li> <li>AWS CLI</li> </ul> </li> <li>Provided by the SEC510 instructor or OnDemand SME:<ul> <li>Cloud flight simulator AMI shared to your personal AWS account</li> <li>Commands to set the Terraform variables and apply the template</li> </ul> </li> </ul>"},{"location":"j02/#step-by-step-instructions","title":"Step by Step Instructions","text":"<ol> <li> <p>Configure your AWS CLI with administrator credentials for your AWS Account.</p> <pre><code>aws configure\n</code></pre> </li> <li> <p>Create a new working directory for running the Terraform deployment.</p> <pre><code>mkdir ~/sec510\ncd ~/sec510\n</code></pre> </li> <li> <p>Download the sec510-j02.tf launch template (e.g. sec510-j02.tf) into the <code>~/sec510</code> directory.</p> </li> <li> <p>After sharing the AMI with your personal AWS account, the instructor or OnDemand SME will give you the commands to set the required Terraform variables and apply the template. Run those commands in the <code>~/sec510</code> directory.</p> </li> <li> <p>The <code>terraform apply</code> command will take a few minutes to complete. Once it is finished, you will see the following:</p> <ul> <li> <p>The <code>environment_summary</code> output contains the information you need to connect to the Cloud Security Flight Simulator.</p> </li> <li> <p>SmartProxy Config - The name of the SmartProxy configuration file created by Terraform in the <code>~/sec510</code> directory.</p> </li> <li> <p>SSH + SOCKS Connect Command - The command to connect to the Cloud Security Flight Simulator using SSH and the SOCKS proxy using the private key created by Terraform in the <code>~/sec510</code> directory.</p> </li> </ul> <pre><code>Apply complete! Resources: 16 added, 0 changed, 0 destroyed.\n\nOutputs:\n\nenvironment_summary = &lt;&lt;END_SUMMARY\nLatest AMI:  ami-089891d11fdf14393 - sans-sec510-j02.24.2.1\nRunning AMI: ami-089891d11fdf14393\nPublic IP:   18.227.81.85\n\nLocal IP:          11.222.333.444\nAllow CIDR:        11.222.333.444/32\n\nProxy Pass:        informally_typically_humble_squid\nSmartProxy Config: SmartProxy-frank-man.json\n\nSSH + SOCKS Connect Command\n\n    ssh -i frank-man.pem -D 54561 student@18.227.81.85\n\nEND_SUMMARY\n</code></pre> </li> <li> <p>Follow the course Lab Setup Instructions guide to install the Cloud Security Flight Simulator's CA certificate, configure the SmartProxy extension, and connect to the Cloud Security Flight Simulator.</p> </li> </ol>"},{"location":"j02/#aws-cloud-security-iam-user","title":"AWS Cloud Security IAM User","text":"<p>To deploy the lab infrastructure to AWS, you need to create a new <code>cloudsecurity</code> IAM user. The easiest way to set permissions is by attaching the AdministratorAccess policy. Our recommendation is to use a permission boundary on this IAM user to restrict access to the services not used in the AWS labs. Then, create a new pair of access keys for authenticating the Cloud Security Flight Simulator to your account.</p>"},{"location":"j02/#requirements_1","title":"Requirements","text":"<ul> <li>Provided by you:<ul> <li>AWS personal account with administrator credentials</li> </ul> </li> </ul>"},{"location":"j02/#step-by-step-instructions_1","title":"Step by Step Instructions","text":"<ol> <li> <p>Log into the AWS Console using your personal administrator account.</p> </li> <li> <p>See the Creating an IAM user in your AWS account documentation to create a new <code>cloudsecurity</code> user.</p> </li> <li> <p>See the Adding permissions to a user (console) documentation to attach the <code>AdministratorAccess</code> policy.</p> </li> <li> <p>See the Managing access keys for IAM users documentation to create a new pair of access keys for the <code>cloudsecurity</code> user.</p> </li> <li> <p>Follow the Lab 1.0: Cloud Account Setup instructions in the electronic workbook to configure the Cloud Security Flight Simulator's AWS Command Line Interface (CLI).</p> </li> </ol>"},{"location":"j02/#azure-subscription","title":"Azure Subscription","text":"<p>To deploy the lab infrastructure to Azure, you need to create a new Azure Subscription (Pay as you Go) and authenticate the Cloud Security Flight Simulator to your Azure subscription.</p>"},{"location":"j02/#requirements_2","title":"Requirements","text":"<ul> <li>Provided by you:<ul> <li>Azure Pay as You Go (PAYG) subscription with owner permissions</li> </ul> </li> </ul>"},{"location":"j02/#step-by-step-instructions_2","title":"Step by Step Instructions","text":"<ol> <li> <p>Log into the Azure Portal using your personal administrator account.</p> </li> <li> <p>Follow the Lab 1.0: Cloud Account Setup instructions in the electronic workbook to configure the Cloud Security Flight Simulator's Command Line Interface (CLI) to authenticate to your Azure subscription.</p> </li> </ol>"},{"location":"j02/#google-cloud-project","title":"Google Cloud Project","text":"<p>To deploy the lab infrastructure to Google, you will need to create a new Google Cloud Project and authenticate the Cloud Security Flight Simulator to use the associated Google account.</p>"},{"location":"j02/#requirements_3","title":"Requirements","text":"<ul> <li>Provided by you:<ul> <li>Personal Google Cloud project</li> </ul> </li> </ul>"},{"location":"j02/#step-by-step-instructions_3","title":"Step by Step Instructions","text":"<ol> <li> <p>Open Firefox and navigate to the GCP Console.</p> </li> <li> <p>Create a new GCP account by pressing the Get started for free button.</p> </li> <li> <p>Enter your Google account's (email address or mobile number), press Next, and complete the sign-in process.</p> <p>Note</p> <p>If you do not have a Google account, press the Create Account button to register a new account.</p> <p></p> </li> <li> <p>You may need to Activate your Google Cloud Platform free trial and accept the Google Cloud Platform Free Trial Terms of Service and fill out the Customer info form to complete the activation process.</p> <p></p> </li> <li> <p>In the Google Cloud Platform (GCP) Console, type \"Create a Project\" in the search field. Select the Create a Project option.</p> <p></p> </li> <li> <p>Enter sec510 for the project name. Make sure the Project ID generated starts with sec510.</p> <p></p> </li> <li> <p>Press the Create button to create the new project.</p> <p>IMPORTANT!</p> <p>Make sure that you select the SEC510 project just created in the top blue bar before going forward.</p> </li> <li> <p>In the Google Cloud Platform (GCP) Console, type \"Service Accounts\". Select the Service Accounts option.</p> <p></p> </li> <li> <p>Press the Create Service Account button.</p> </li> <li> <p>Name the service account <code>cloudsecurity</code> and press the Create button.</p> <p></p> </li> <li> <p>Search for and add the following roles:</p> <pre><code>editor\nfirebase.admin\ncloudkms.admin\ncloudkms.cryptoKeyDecrypter\ncloudkms.cryptoKeyEncrypter\ncloudsql.admin\ncompute.admin\niam.roleAdmin\niam.serviceAccountAdmin\niam.serviceAccountUser\nresourcemanager.projectIamAdmin\niam.securityAdmin\niam.serviceAccountKeyAdmin\niam.workloadIdentityPoolAdmin\nsecretmanager.admin\nservicenetworking.networksAdmin\nserviceusage.serviceUsageAdmin\nstorage.admin\nlogging.admin\ncloudfunctions.admin\ndeploymentmanager.editor\nappengine.appAdmin\nappengine.serviceAdmin\nappengine.appCreator\ncloudbuild.builds.editor\nsecuritycenter.admin\nrecommender.iamAdmin\nbigquery.admin\n</code></pre> </li> <li> <p>Click Continue and Done.</p> </li> <li> <p>Click the newly created service account with the email cloudsecurity@...iam.gserviceaccount.com.</p> </li> <li> <p>Click the Keys tab, press the Add Key button and click Create New Key.</p> <p></p> </li> <li> <p>Confirm that the Key type selected is JSON and click Create, which will download a .json file to your host machine.</p> <p></p> </li> <li> <p>Browse to the OpenVSCode Server's SEC510 workspace.</p> </li> <li> <p>Using your host machine's file explorer (or Finder), drag the .json file onto the OpenVSCode Server's left navigation menu and drop the file into the <code>credentials</code> directory.</p> </li> <li> <p>Press the Done button in the Google Cloud Console. Keep the .json file on your host machine for later use.</p> </li> <li> <p>Follow the Lab 1.0: Cloud Account Setup instructions in the electronic workbook to configure the GCloud Command Line Interface (CLI) and set up your Firebase project.</p> </li> </ol>"},{"location":"j02/#activate-firebase","title":"Activate Firebase","text":"<p>Firebase is a suite of cloud services acquired and enhanced by Google. It is loosely integrated with Google Cloud. We will need to activate Firebase for our project in order to complete certain labs. You can use Firebase without deploying other infrastructure to Google Cloud.</p> <ol> <li> <p>While still logged in to GCP in Firefox, navigate to the Firebase Console.</p> </li> <li> <p>Click Get started with a Firebase project:</p> <p></p> </li> <li> <p>Click Add Firebase to Google Cloud project. Then, select your existing sec510 GCP project, accept all of the checkboxes displayed, and click Continue:</p> <p></p> </li> <li> <p>Click through the remainder of the wizard (these the values of these settings are not important.). Once in your newly created Firebase project, select the Build option followed by Authentication in the side navigation. Then, click Get started:</p> <p></p> </li> <li> <p>Select the Anonymous sign-in provider:</p> <p></p> </li> <li> <p>Toggle Enable and click Save:</p> <p></p> </li> <li> <p>select the Build option followed by Realtime Database in the side navigation. The, click Create Database:</p> <p></p> </li> <li> <p>Select the us-central1 region and click Next:</p> <p></p> </li> <li> <p>Accept the default security rules and click Enable.</p> </li> <li> <p>Click Firestore Database on the side navigation. Then, click Create database:</p> <p></p> </li> <li> <p>Select the nam5 region and click Next:</p> <p></p> </li> <li> <p>Accept the default security rules and click Enable.</p> </li> </ol>"},{"location":"j02/#clean-up","title":"Clean Up","text":"<ul> <li> <p>When you are finished with the labs, run the Lab 5.4: Lab Teardown script in the electronic workbook to remove the lab infrastructure from your AWS, Azure and Google cloud accounts.</p> </li> <li> <p>Then use the same Terraform commands you used to create the Cloud Security Flight Simulator, except change the last command from <code>terraform apply</code> to <code>terraform destroy</code>. This will remove the Cloud Security Flight Simulator and the SmartProxy configuration file from your AWS account.</p> </li> </ul>"},{"location":"k01/","title":"SANS SEC510 Cloud Security Simulator Setup Guide (J02)","text":"<p>SEC510 students can follow these instructions to build the labs in their personal AWS, Azure, and Google cloud accounts. Doing so allows students to complete the labs after access to the SANS provisioned accounts is expired. Cost estimates vary by cloud provider:</p> <ul> <li> <p>AWS free tier eligible accounts are expected to cost roughly $10 USD per day for the AWS resources (including the cloud simulator instance). Make sure you stop the cloud simulator instance when you are not using it.</p> </li> <li> <p>Azure Pay as You Go (PAYG) subscriptions are expected to cost roughly $5 USD per day for the Azure resources.</p> </li> <li> <p>Google Cloud projects are expected to cost roughly $5 USD per day for the Google Cloud resources.</p> </li> </ul> <p>To limit costs, please make sure to run the Lab 5.4: Lab Teardown script in the electronic workbook when you are not using the lab environment.</p> <p>YOUR Financial Responsibility</p> <p>When running the Cloud Security Flight Simulator and performing the corresponding labs in your personal AWS, Azure, and Google Cloud environments, YOU are responsible for all costs.</p> <p>BEWARE OF SECURITY RISKS</p> <p>We will be deploying purposefully vulnerable applications and infrastructure to these accounts. This is necessary to illustrate the dangers of insecure cloud environments and how to mitigate the risk they introduce.</p> <p>While we take precautions to keep students safe, SANS cannot guarantee that these accounts will be protected.</p> <p>We recommend monitoring your accounts for unexpected activity. You should also consider canceling your billing when you are done with your lab environment. Here are instructions on how to do this:</p> <ul> <li>Close your AWS account</li> <li>Cancel your Azure subscription</li> <li>Shutting down GCP projects</li> </ul> <p>Instructions May Be Out-of-Date</p> <p>We do not maintain these instructions as actively as those in the E-Workbook. Please note that these instructions may be out-of-date. Thank you for understanding.</p>"},{"location":"k01/#cloud-simulator-deployment","title":"Cloud Simulator Deployment","text":""},{"location":"k01/#requirements","title":"Requirements","text":"<ul> <li>Details found in Course Materials Downloads \"Lab Setup Instructions\" guide:<ul> <li>Firefox + SmartProxy (by Salar K)</li> <li>SANS Cloud Security CA Certificate</li> </ul> </li> <li>Provided by you:<ul> <li>AWS personal account with administrator credentials</li> <li>Terraform 1.4 or later</li> <li>AWS CLI</li> </ul> </li> <li>Provided by the SEC510 instructor or OnDemand SME:<ul> <li>Cloud flight simulator AMI shared to your personal AWS account</li> <li>Commands to set the Terraform variables and apply the template</li> </ul> </li> </ul>"},{"location":"k01/#step-by-step-instructions","title":"Step by Step Instructions","text":"<ol> <li> <p>Configure your AWS CLI with administrator credentials for your AWS Account.</p> <pre><code>aws configure\n</code></pre> </li> <li> <p>Create a new working directory for running the Terraform deployment.</p> <pre><code>mkdir ~/sec510\ncd ~/sec510\n</code></pre> </li> <li> <p>Download the sec510-j02.tf launch template (e.g. sec510-j02.tf) into the <code>~/sec510</code> directory.</p> </li> <li> <p>After sharing the AMI with your personal AWS account, the instructor or OnDemand SME will give you the commands to set the required Terraform variables and apply the template. Run those commands in the <code>~/sec510</code> directory.</p> </li> <li> <p>The <code>terraform apply</code> command will take a few minutes to complete. Once it is finished, you will see the following:</p> <ul> <li> <p>The <code>environment_summary</code> output contains the information you need to connect to the Cloud Security Flight Simulator.</p> </li> <li> <p>SmartProxy Config - The name of the SmartProxy configuration file created by Terraform in the <code>~/sec510</code> directory.</p> </li> <li> <p>SSH + SOCKS Connect Command - The command to connect to the Cloud Security Flight Simulator using SSH and the SOCKS proxy using the private key created by Terraform in the <code>~/sec510</code> directory.</p> </li> </ul> <pre><code>Apply complete! Resources: 16 added, 0 changed, 0 destroyed.\n\nOutputs:\n\nenvironment_summary = &lt;&lt;END_SUMMARY\nLatest AMI:  ami-089891d11fdf14393 - sans-sec510-j02.24.2.1\nRunning AMI: ami-089891d11fdf14393\nPublic IP:   18.227.81.85\n\nLocal IP:          11.222.333.444\nAllow CIDR:        11.222.333.444/32\n\nProxy Pass:        informally_typically_humble_squid\nSmartProxy Config: SmartProxy-frank-man.json\n\nSSH + SOCKS Connect Command\n\n    ssh -i frank-man.pem -D 54561 student@18.227.81.85\n\nEND_SUMMARY\n</code></pre> </li> <li> <p>Follow the course Lab Setup Instructions guide to install the Cloud Security Flight Simulator's CA certificate, configure the SmartProxy extension, and connect to the Cloud Security Flight Simulator.</p> </li> </ol>"},{"location":"k01/#aws-cloud-security-iam-user","title":"AWS Cloud Security IAM User","text":"<p>To deploy the lab infrastructure to AWS, you need to create a new <code>cloudsecurity</code> IAM user. The easiest way to set permissions is by attaching the AdministratorAccess policy. Our recommendation is to use a permission boundary on this IAM user to restrict access to the services not used in the AWS labs. Then, create a new pair of access keys for authenticating the Cloud Security Flight Simulator to your account.</p>"},{"location":"k01/#requirements_1","title":"Requirements","text":"<ul> <li>Provided by you:<ul> <li>AWS personal account with administrator credentials</li> </ul> </li> </ul>"},{"location":"k01/#step-by-step-instructions_1","title":"Step by Step Instructions","text":"<ol> <li> <p>Log into the AWS Console using your personal administrator account.</p> </li> <li> <p>See the Creating an IAM user in your AWS account documentation to create a new <code>cloudsecurity</code> user.</p> </li> <li> <p>See the Adding permissions to a user (console) documentation to attach the <code>AdministratorAccess</code> policy.</p> </li> <li> <p>See the Managing access keys for IAM users documentation to create a new pair of access keys for the <code>cloudsecurity</code> user.</p> </li> <li> <p>Follow the Lab 1.0: Cloud Account Setup instructions in the electronic workbook to configure the Cloud Security Flight Simulator's AWS Command Line Interface (CLI).</p> </li> </ol>"},{"location":"k01/#azure-subscription","title":"Azure Subscription","text":"<p>To deploy the lab infrastructure to Azure, you need to create a new Azure Subscription (Pay as you Go) and authenticate the Cloud Security Flight Simulator to your Azure subscription.</p>"},{"location":"k01/#requirements_2","title":"Requirements","text":"<ul> <li>Provided by you:<ul> <li>Azure Pay as You Go (PAYG) subscription with owner permissions</li> </ul> </li> </ul>"},{"location":"k01/#step-by-step-instructions_2","title":"Step by Step Instructions","text":"<ol> <li> <p>Log into the Azure Portal using your personal administrator account.</p> </li> <li> <p>Follow the Lab 1.0: Cloud Account Setup instructions in the electronic workbook to configure the Cloud Security Flight Simulator's Command Line Interface (CLI) to authenticate to your Azure subscription.</p> </li> </ol>"},{"location":"k01/#google-cloud-project","title":"Google Cloud Project","text":"<p>To deploy the lab infrastructure to Google, you will need to create a new Google Cloud Project and authenticate the Cloud Security Flight Simulator to use the associated Google account.</p>"},{"location":"k01/#requirements_3","title":"Requirements","text":"<ul> <li>Provided by you:<ul> <li>Personal Google Cloud project</li> </ul> </li> </ul>"},{"location":"k01/#step-by-step-instructions_3","title":"Step by Step Instructions","text":"<ol> <li> <p>Open Firefox and navigate to the GCP Console.</p> </li> <li> <p>Create a new GCP account by pressing the Get started for free button.</p> </li> <li> <p>Enter your Google account's (email address or mobile number), press Next, and complete the sign-in process.</p> <p>Note</p> <p>If you do not have a Google account, press the Create Account button to register a new account.</p> <p></p> </li> <li> <p>You may need to Activate your Google Cloud Platform free trial and accept the Google Cloud Platform Free Trial Terms of Service and fill out the Customer info form to complete the activation process.</p> <p></p> </li> <li> <p>In the Google Cloud Platform (GCP) Console, type \"Create a Project\" in the search field. Select the Create a Project option.</p> <p></p> </li> <li> <p>Enter sec510 for the project name. Make sure the Project ID generated starts with sec510.</p> <p></p> </li> <li> <p>Press the Create button to create the new project.</p> <p>IMPORTANT!</p> <p>Make sure that you select the SEC510 project just created in the top blue bar before going forward.</p> </li> <li> <p>In the Google Cloud Platform (GCP) Console, type \"Service Accounts\". Select the Service Accounts option.</p> <p></p> </li> <li> <p>Press the Create Service Account button.</p> </li> <li> <p>Name the service account <code>cloudsecurity</code> and press the Create button.</p> <p></p> </li> <li> <p>Search for and add the following roles:</p> <pre><code>editor\nfirebase.admin\ncloudkms.admin\ncloudkms.cryptoKeyDecrypter\ncloudkms.cryptoKeyEncrypter\ncloudsql.admin\ncompute.admin\niam.roleAdmin\niam.serviceAccountAdmin\niam.serviceAccountUser\nresourcemanager.projectIamAdmin\niam.securityAdmin\niam.serviceAccountKeyAdmin\niam.workloadIdentityPoolAdmin\nsecretmanager.admin\nservicenetworking.networksAdmin\nserviceusage.serviceUsageAdmin\nstorage.admin\nlogging.admin\ncloudfunctions.admin\ndeploymentmanager.editor\nappengine.appAdmin\nappengine.serviceAdmin\nappengine.appCreator\ncloudbuild.builds.editor\nsecuritycenter.admin\nrecommender.iamAdmin\nbigquery.admin\n</code></pre> </li> <li> <p>Click Continue and Done.</p> </li> <li> <p>Click the newly created service account with the email cloudsecurity@...iam.gserviceaccount.com.</p> </li> <li> <p>Click the Keys tab, press the Add Key button and click Create New Key.</p> <p></p> </li> <li> <p>Confirm that the Key type selected is JSON and click Create, which will download a .json file to your host machine.</p> <p></p> </li> <li> <p>Browse to the OpenVSCode Server's SEC510 workspace.</p> </li> <li> <p>Using your host machine's file explorer (or Finder), drag the .json file onto the OpenVSCode Server's left navigation menu and drop the file into the <code>credentials</code> directory.</p> </li> <li> <p>Press the Done button in the Google Cloud Console. Keep the .json file on your host machine for later use.</p> </li> <li> <p>Follow the Lab 1.0: Cloud Account Setup instructions in the electronic workbook to configure the GCloud Command Line Interface (CLI).</p> </li> </ol>"},{"location":"k01/#create-firebase-project","title":"Create Firebase Project","text":"<ol> <li> <p>While still logged in to GCP in Firefox, navigate to the Firebase Console.</p> </li> <li> <p>Click Get started with a Firebase project:</p> <p></p> </li> <li> <p>Click Add Firebase to Google Cloud project. Then, select your existing sec510 GCP project, accept all of the checkboxes displayed, and click Continue:</p> <p></p> </li> <li> <p>You will now be able to use this project when activating Firebase in Lab 4.4: Broken Firebase Database Access Control.</p> </li> </ol>"},{"location":"k01/#clean-up","title":"Clean Up","text":"<ul> <li> <p>When you are finished with the labs, run the Lab 5.4: Lab Teardown script in the electronic workbook to remove the lab infrastructure from your AWS, Azure and Google cloud accounts.</p> </li> <li> <p>Then use the same Terraform commands you used to create the Cloud Security Flight Simulator, except change the last command from <code>terraform apply</code> to <code>terraform destroy</code>. This will remove the Cloud Security Flight Simulator and the SmartProxy configuration file from your AWS account.</p> </li> </ul>"}]}